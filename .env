# KubeVirt Guacamole Operator Environment Configuration
# This file is automatically generated by scripts/detect-ip.sh
# Source this file to set environment variables for the project

# Node IP Detection (automatically detected)
export NODE_IP=$(hostname -I | awk '{print $1}')

# Service Ports (configurable)
export REGISTRY_PORT=30500
export GUACAMOLE_PORT=30080
export KEYCLOAK_PORT=30081
export GRAFANA_PORT=30300
export PROMETHEUS_PORT=30090

# Composite Endpoints (derived from above)
export REGISTRY_ENDPOINT="${NODE_IP}:${REGISTRY_PORT}"
export GUACAMOLE_ENDPOINT="${NODE_IP}:${GUACAMOLE_PORT}"
export KEYCLOAK_ENDPOINT="${NODE_IP}:${KEYCLOAK_PORT}"
export GRAFANA_ENDPOINT="${NODE_IP}:${GRAFANA_PORT}"
export PROMETHEUS_ENDPOINT="${NODE_IP}:${PROMETHEUS_PORT}"

# Legacy compatibility
export REGISTRY_IP="$NODE_IP"
export REGISTRY_HOST="$NODE_IP"

# Display current configuration
echo "KubeVirt Guacamole Operator Environment:"
echo "  Node IP: $NODE_IP"
echo "  Registry: http://$REGISTRY_ENDPOINT"
echo "  Guacamole: http://$GUACAMOLE_ENDPOINT/guacamole/"
echo "  Keycloak: http://$KEYCLOAK_ENDPOINT"
echo "  Grafana: http://$GRAFANA_ENDPOINT"
echo "  Prometheus: http://$PROMETHEUS_ENDPOINT"
